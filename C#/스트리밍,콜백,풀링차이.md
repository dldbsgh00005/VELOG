<h1> 🔨 콜백, 풀링에 대한 개략 </h1>

| 구분              | 콜백 방식                                | 풀링 방식                                                  |
| --------------- | ------------------------------------ | ------------------------------------------------------ |
| **실행 트리거**      | 카메라 SDK에서 프레임이 준비될 때마다 자동 호출         | 타이머 (혹은 루프) 인터벌마다 명시적으로 요청                             |
| **버퍼 관리**       | SDK 내부 큐에 할당된 N개의 버퍼(여기선 3개)가 순환     | 매번 즉시 StartGrabbing → GetImageForBGR → StopGrabbing 수행 |
| **프레임 전달**      | 큐에 쌓인 모든 프레임(혹은 최신 모드 지정 시 최신만)      | 호출 시점에 준비된 단일 프레임만 가져옴                                 |
| **지연(Latency)** | 큐 대기 시간이 있으면 약간의 버퍼링 지연 발생 가능        | 바로 요청–바로 표시 → 최소 지연 유지                                 |
| **CPU 사용량**     | 콜백 빈도만큼 컨텍스트 전환, 내부 스레드 오버헤드 있음      | 타이머 주기 × 동기Grab 비용만큼 CPU 점유                            |
| **프레임 제어**      | SDK가 전달하는 모든 프레임에 반응 → 과부하 시 뒷프레임 처리 | 원하는 FPS(Interval)로 간헐적 제어 가능                           |
| **구현 복잡도**      | 제어 포인트가 분산되어 있어 디버깅·정합성 관리가 어려울 수 있음 | 코드 흐름이 단순해 이해·유지보수 용이                                  |
| **프레임 누락 처리**   | 콜백이 몰리면 버퍼 오버플로우―플레임 드롭 모드 필요        | 타이머 주기보다 더 느리면 요청 시 최신 프레임만 응답                         |

<h1> 🔨 제한 사항 </h1>
<ul> 
  <li> 기본 설정에서 SDK가 내부에 3개의 스트림 버퍼를 할당, 각 버퍼에 순차적으로 프레임을 채워 콜백으로 전달 -> PictureBox에 같은 영상이 3개 겹쳐 보임. </li>
  <li> Pulling 방식 or StreamBufferCount=1 + StreamBufferHandlingMode=LatestOnly와 같이 버퍼 개수를 제한 혹은 최신의 프레임만 받지 않는다면 항상 N개의 버퍼 ( 현재 3개 ) </li>
  <li> 카메라 transport 레이어에서 기본값으로 3‑buffer 이소크로너스 전송을 사용 (고정값) </li>
  <li> GigE 장비의 GenICam 파라미터(StreamBufferCount, StreamBufferHandlingMode)는 동작 </li>
  <li> USB 장비 -> **MvCamCtrl** SDK가 USB Isochronous 3‑buffer 모드를 고정으로 사용하게 되어 있어, 위 파라미터를 설정해도 무시됨 </li>
  <li> USB 대역으로 잡힌 버퍼 개수는 SDK/디바이스 드라이버 레벨에서 3으로 하드코딩되어 있음 -> 콜백 방식은 항상 세 개의 동일 프레임이 순환하며 전달 </li>
  <li> 현재 USB 카메라로 추정됨 -> Transport Layer가 Gige로 확인 되었으나 실제 지원 여부를 검증하는 코드 동작 시 미지원으로 확인됨 </li>
  <li>  </li>
</ul>

<h1> 🔨 해결 방안 </h1>
 <li> GigE 카메라 : GenICam 파라미터가 동작 -> 버퍼 수와 핸들링 모드를 조절 가능 </li>
 <li> USB 카메라 : 내부 드라이버 버퍼 고정값 -> 폴링(polling) 방식 동기 캡처 루프가 가장 확실한 방법 </li>

<h1> 🔨 현재 상황 </h1>
<li> Pulling 방식 구현 성공 </li>

<h1> 🔨 기대 사항 </h1>
<li> USB 카메라의 경우 고정적으로 3개의 버퍼로 돌아감 </li>
<li> 현재 프레임이 들어오면 바로 반응하는 구조 -> 마지막 버퍼에만 반응하도록 구현이 가능한지 확인 진행중 </li>

