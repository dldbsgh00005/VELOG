@RestControllerAdvice, @ExceptionHandler

1. ì˜ˆì™¸ë¥¼ ì„ ì–¸í•œë‹¤.
2. GlobalExceptionHandler í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ì–´ @RestControllerAdviceë¥¼ ì‘ì„±í•œë‹¤.
3. ExceptionHandler ë©”ì†Œë“œë¥¼ ë§Œë“¤ì–´ @ExceptionHandlerë¥¼ ì‘ì„±, ë§¤ê°œë³€ìˆ˜ë¡œ ì˜ˆì™¸ í´ë˜ìŠ¤ë¥¼ ì‘ì„±
4. ExceptionBody í´ë˜ìŠ¤ë¥¼ ì‘ì„±, í•„ë“œë¡œ code, messageë¥¼ ì‘ì„± í›„ @AllAragsConstructor ì‘ì„±, (Json ì§ë ¬í™” ì‹œ Getterê°€ í•„ìš”í•˜ë¯€ë¡œ @Getterë¥¼ ì‘ì„±í•˜ê±°ë‚˜ í•„ë“œì— @JsonProperty í˜¹ì€ í´ë˜ìŠ¤ ìœ„ì— @JsonAutoDetect ì‘ì„±)

# ì˜ˆì‹œ ì½”ë“œ

ğŸ“Œ ì˜ˆì™¸ í´ë˜ìŠ¤
public class UsernameAlreadyExistException extends RuntimeException {

    public UsernameAlreadyExistException(){
        super("Username Already Exist");
    }
}

ğŸ“Œ ì˜ˆì™¸ í•¸ë“¤ëŸ¬ í´ë˜ìŠ¤
@RestControllerAdvice
public class GlobalExceptionHandler {
    
    /** User **/

    ///  handleUsernameAlreadyExistException
    @ExceptionHandler(UsernameAlreadyExistException.class)
    public ResponseEntity<?> handleUsernameAlreadyExistException(UsernameAlreadyExistException ex){

        HttpStatus status = HttpStatus.BAD_REQUEST;

        String code = "BAD_REQUEST";
        String message = ex.getMessage();

        return ResponseEntity.status(status).body(new ExceptionBody(code, message));
    }
}

ğŸ“Œ  ì˜ˆì™¸ì— ë³´ë‚¼ ë°”ë””

@AllArgsConstructor
@Getter // JsonPropertyë¡œ ì¸ì‹í•˜ë„ë¡ í•˜ì˜€ìŒ
public class ExceptionBody {

    @JsonProperty
    private String code;

    @JsonProperty
    private String message;

}

