# ğŸ“Œ WebConfig

@Configuration
public class WebConfig implements WebMvcConfigurer {

    @Override
    public void addCorsMappings(CorsRegistry registry) {

        registry.addMapping("/**").allowedOriginPatterns("http://localhost:5176","http://localhost:5177")
                .allowedMethods("GET","POST","PUT","DELETE","OPTIONS")
                .allowedHeaders("*")
                .allowCredentials(true);
    }
}


# ğŸ“Œ WebSocketConfig

@Configuration
@EnableWebSocketMessageBroker
public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {

    @Override
    public void registerStompEndpoints(StompEndpointRegistry registry) {
        registry.addEndpoint("/ws","/ws/info")
                .setAllowedOriginPatterns("http://localhost:5176","http://localhost:5177")
                .withSockJS();
    }

    @Override
    public void configureMessageBroker(MessageBrokerRegistry registry) {
        registry.setApplicationDestinationPrefixes("/pub");
        registry.enableSimpleBroker("/sub");
    }
}

# ğŸ“Œ WebSocketController

@RestController
@RequestMapping("")
@Slf4j
public class WebSocketController {
    
    ///  í•„ë“œ
    private final SimpMessagingTemplate smt;
    
    ///  ìƒì„±ì
    public WebSocketController(SimpMessagingTemplate smt) {
        this.smt = smt;
    }

    ///  Send Message
    @MessageMapping("/chat.sendMessage")
    @SendTo("/sub/public")
    public ChatMessageDTO sendMessage(@Payload ChatMessageDTO message ){   // ì •ì ì¸ ê²½ë¡œë¡œ ì‘ë‹µ í•  ê²ƒì´ë¯€ë¡œ /sub ê¸°ë³¸ ê²½ë¡œë¥¼ ì‚¬ìš©
        log.info("message.content : {} ", message.getContent() );
        log.info("message.sender : {} ", message.getSender() );
        return message;
    }
}

# ğŸ“Œ ChatMessageDTO

@Getter
@Setter @NoArgsConstructor @AllArgsConstructor
public class ChatMessageDTO {

    private String type;

    private String sender;

    private String content;
}
